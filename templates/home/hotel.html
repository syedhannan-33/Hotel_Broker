{% extends 'home/base.html' %}
{% block title %}
{{hotel.hotel_name}}
{% endblock title %}
{% load coustom_tags %}


{% block css %}
<style>
    .list-group {
        list-style-type: disc !important;
    }
</style>
{% endblock css %}



{% block body %}
<div class=" container mt-4 ">

    <div id="carouselExampleControls" class="carousel slide w-75 m-auto" data-bs-ride="carousel">
        <div class="carousel-inner">

            {% for i in hotel.images.all %}

            <div class="carousel-item active">
                <img src="/media/{{i.images}}" class="d-block w-100" alt="...">
            </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls"
            data-bs-slide="prev">
            <span class="carousel-control-prev-icon" ></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next type="button" data-bs-target="#carouselExampleControls"
            data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <div class="container w-75 m-auto">
        <h1 class="fw-bold">{{hotel.hotel_name|title}}</h1>
        <ul class="list-group list-group-horizontal">
            {% for room_type, price in hotel.rooms.all|unique_room_types_with_prices %}
            <li class="list-group-item mt-1 mr-1">
                {{ room_type|title }} <br> Rs. {{ price }}
            </li>
            {% endfor %}
        </ul>
    </div>

    <div class="mt-4 mb-4  w-75 m-auto">
        <div class="mt-4">
            <h3>Description</h3>
            <p> {{hotel.description}} </p>
        
            {% if request.user.is_authenticated %}
            <div class="card">

                <div class="card-body">
                    <form method='POST'>
                        {% csrf_token %}
                        <label for="rtype" class="mt-3">
                            Package Type
                        </label>
                        <select name="roomType" class="form-control mt-1" id="roomType">
                            <option value="Deluxe" {% if room_type == 'Deluxe' %}selected{% endif %}>Deluxe</option>
                            <option value="Suite" {% if room_type == 'Suite' %}selected{% endif %}>Suite</option>
                            <option value="Family" {% if room_type == 'Family' %}selected{% endif %}>Family</option>
                            <option value="Executive" {% if room_type == 'Executive' %}selected{% endif %}>Standard</option>
                            <option value="Premium" {% if room_type == 'Premium' %}selected{% endif %}>Superior</option>
                        </select>
                        
                        <label for="startDate" class='mt-2'>
                            Check In
                        </label>
                        <input type="date" name="startDate" class="form-control mt-1" id="startDate" name="startDate" min={{date}} 
                        {% if startdate %}
                        value="{{startdate}}"
                        {% endif %}
                        >
                        <label for="endDate" class="mt-2">
                            Check Out
                        </label>
                        <input type="date" name="endDate" class="form-control mt-1" id="endDate" name="endDate" min={{date}}
                        {% if enddate %}
                        value="{{enddate}}" 
                        {% endif %}
                        >
                        <div class='d-grid'>

                            <button class="btn mt-3 btn-primary" type='submit'>
                                Book Now
                            </button>
                        </div>
                    </form>
                </div>
            </div>
            {% else %}
            <div class="d-grid ">
                <a class="btn btn-primary" href="{% url 'signin' %}" type="button">Sign in to book hotel --> </a>
              </div>
            {% endif %}
        </div>

    </div>
</div>

{% endblock body %}